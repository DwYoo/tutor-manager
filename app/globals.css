@import "tailwindcss";

/* ─── Design Tokens ─── */
@theme {
  /* Colors */
  --color-bg: #FAFAF9;
  --color-sf: #FFFFFF;
  --color-sfh: #F5F5F4;
  --color-bd: #E7E5E4;
  --color-bl: #F0EFED;
  --color-pr: #1A1A1A;
  --color-ac: #2563EB;
  --color-al: #DBEAFE;
  --color-as: #EFF6FF;
  --color-tp: #1A1A1A;
  --color-ts: #78716C;
  --color-tt: #A8A29E;
  --color-su: #16A34A;
  --color-sb: #F0FDF4;
  --color-dn: #DC2626;
  --color-db: #FEF2F2;
  --color-wn: #F59E0B;
  --color-wb: #FFFBEB;

  /* Spacing */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0,0,0,.06);
  --shadow-md: 0 4px 16px rgba(0,0,0,.08);
  --shadow-lg: 0 8px 40px rgba(0,0,0,.1);
  --shadow-xl: 0 20px 60px rgba(0,0,0,.15);

  /* Typography */
  --font-xs: 11px;
  --font-sm: 12px;
  --font-base: 14px;
  --font-lg: 16px;
  --font-xl: 20px;
  --font-2xl: 24px;
}

/* ─── Reset ─── */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  overflow-x: hidden;
}

body {
  font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
  background: var(--color-bg);
  color: var(--color-tp);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding-bottom: env(safe-area-inset-bottom);
}

/* ─── Focus Management ─── */
:focus-visible {
  outline: 2px solid var(--color-ac);
  outline-offset: 2px;
  border-radius: 4px;
}

/* ─── Interactive Elements ─── */
button, a {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.06);
  touch-action: manipulation;
}

input, textarea, select {
  font-size: 16px; /* Prevents iOS zoom on focus */
  touch-action: manipulation;
}

@media (min-width: 768px) {
  input, textarea, select {
    font-size: inherit;
  }
}

/* ─── Scrollbar ─── */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-thumb {
  background: var(--color-bd);
  border-radius: 3px;
}

@media (max-width: 768px) {
  ::-webkit-scrollbar {
    width: 0;
    height: 0;
  }
}

/* ─── Animations ─── */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInRight {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@keyframes fadeOverlay {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes toastIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes modalIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes bottomSheetIn {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease;
}

/* ─── AppShell Layout ─── */
@media (min-width: 1024px) {
  .menu-toggle { display: none !important; }
  .mobile-nav { display: none !important; }
  .desktop-sidebar { display: block !important; }
  .main-content-area { padding-bottom: 0 !important; }
  .toast-container {
    left: auto !important;
    right: 24px !important;
    bottom: 24px !important;
    max-width: 380px;
  }
}

@media (max-width: 1023px) {
  .mobile-nav { display: flex !important; }
  .app-root { height: auto !important; overflow: visible !important; }
}

/* ─── Sidebar ─── */
.sb-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 11px 16px;
  border-radius: 12px;
  border: none;
  font-size: 13px;
  cursor: pointer;
  font-family: inherit;
  margin-bottom: 2px;
  transition: background .15s, color .15s;
  background: transparent;
  color: var(--color-ts);
  font-weight: 400;
}

.sb-item:hover {
  background: var(--color-sfh);
}

.sb-item.active {
  background: var(--color-as);
  color: var(--color-ac);
  font-weight: 600;
}

.sb-item.active svg {
  stroke: var(--color-ac);
}

/* ─── Hoverable Card ─── */
.hcard {
  transition: transform .12s, box-shadow .12s;
}

.hcard:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0,0,0,.08);
}

/* ─── Login ─── */
.login-card {
  animation: slideUp .4s ease;
}

.social-btn {
  transition: all .12s;
}

.social-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,.08);
}

.link-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-family: inherit;
}

.link-btn:hover {
  text-decoration: underline;
}

/* ─── Mobile Overrides ─── */
@media (max-width: 640px) {
  .detail-modal {
    max-width: 100vw !important;
    max-height: 100vh !important;
    height: 100dvh !important;
    border-radius: 0 !important;
    width: 100% !important;
  }
}

@media (max-width: 768px) {
  .table-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

@media (max-width: 768px) {
  .cal-lesson-text {
    display: none !important;
  }
  .cal-cell {
    min-height: 52px !important;
  }
}

/* ─── LessonDetailModal mobile ─── */
@media (max-width: 640px) {
  .ldm-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  .ldm-tabs button {
    white-space: nowrap;
    flex-shrink: 0;
  }
  .ldm-footer {
    position: sticky;
    bottom: 0;
    background: white;
    padding: 16px;
    border-top: 1px solid #E7E5E4;
  }
  .ldm-textarea {
    min-height: 120px !important;
  }
}

/* ─── ShareView mobile ─── */
@media (max-width: 768px) {
  .share-container {
    padding: 0 !important;
  }
  .share-container .sv-content {
    padding: 16px 16px 60px !important;
  }
}

@media (max-width: 640px) {
  .sv-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  .sv-tabs button {
    white-space: nowrap;
    flex-shrink: 0;
  }
  .sv-wrong-table {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  .sv-wrong-table table {
    min-width: 400px;
  }
}

/* ─── Body scroll lock for modals ─── */
body.modal-open {
  overflow: hidden;
}
